# 格式化字符串总结

**写在前面：**

说是格式化字符串总结，其实更像是对任意地址读写操作的总结

- 寄存器利用
- printf

## 原理

调用`printf`函数族时，因为格式字符串要求的参数个数和实际的参数格式不匹配，导致去堆栈中寻找数据，于是导致数据被泄露

这边对pritnf函数的格式字符做个简单列举

| 格式字符 | 数据类型       | 描述                               | 示例                             | 输出示例         |
| :------- | :------------- | :--------------------------------- | :------------------------------- | :--------------- |
| `%d`     | `int`          | 有符号十进制整数                   | `printf("%d", 123);`             | `123`            |
| `%i`     | `int`          | 有符号十进制整数（同`%d`）         | `printf("%i", 45);`              | `45`             |
| `%x`     | `unsigned int` | 无符号十六进制整数（小写字母）     | `printf("%x", 255);`             | `ff`             |
| `%c`     | `char`         | 单个字符                           | `printf("%c", 'A');`             | `A`              |
| `%s`     | `char*`        | 字符串                             | `printf("%s", "Hi");`            | `Hi`             |
| `%p`     | `void*`        | 指针地址（十六进制形式）           | `int x; printf("%p", &x);`       | `0x7ffeefbff4ac` |
| `%n`     | `int*`         | 将已输出的字符数写入指针指向的位置 | `int cnt; printf("Hi%n", &cnt);` | `cnt=2`          |